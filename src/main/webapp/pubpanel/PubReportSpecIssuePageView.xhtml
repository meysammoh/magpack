<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="#{localeBean.langua ge}"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
        >
<ui:composition template="/templates/breadcrumbcomp.xhtml">
    <ui:define name="content">

        <f:event listener="#{breadCrumbNav.navigatespecIssuePageView}" type="preRenderView"/>
        <p:panel id="IssuePageReportContainer" style="width:#{statistics.width};margin: auto; ">
            <h:form id="magazinePageReportfrm">
                <div id="LeftColumn">
                    <div id="magazinestable">
                        <p:dataTable
                                emptyMessage="#{text['no.records.found']}"
                                id="specissuepages"
                                styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker"
                                draggableRows="true" var="pagespissue" value="#{pubUserDet.listOfPageImageAdress}"
                                currentPageReportTemplate="{currentPage} #{text['of.text']} {totalRecords}"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {JumpToPageDropdown} "
                                scrollable="true" scrollHeight="400" paginator="true" rows="10"
                                rowsPerPageTemplate="10,25,50,100"
                                editable="true" editMode="cell"
                                tableStyle="overflow: hidden; text-overflow: ellipsis;font-size: 0.8em;margin:0 auto;"
                                lazy="false">


                            <p:column id="pagenumbercol" headerText="#{text['page.text']}">

                                <p:outputLabel style="color:#269abc;" id="pagenumber"
                                               value="#{pagespissue.pageNumber}"/>

                            </p:column>
                            <p:column id="pagetypecol" headerText="#{text['type.text']}">

                                <p:outputLabel value="#{pagespissue.pageType}"/>


                            </p:column>
                            <p:column id="pageviewscol" headerText="#{text['page.views.text']}">
                                <p:outputLabel value="#{pagespissue.pageViews}"/>

                            </p:column>
                            <p:column id="lengthofviewcol" headerText="#{text['view.length.text']}">
                                <p:outputLabel value="#{pagespissue.aveLengthOfView}"/>
                            </p:column>

                            <f:facet name="footer">

                                <h:commandLink>
                                    <p:graphicImage style="width: 50px;height: 50px;" value="/icons/xml.gif"
                                                    title="#{text['excel.label']}"/>
                                    <p:dataExporter type="xls" fileName="magpack" target="specissuepages"/>

                                </h:commandLink>

                                <!--<h:commandLink value="Page Data"  >-->
                                <!--<p:graphicImage value="/icons/xml.png" title="Page Data" style="float: right"/>-->
                                <!--<p:dataExporter type="xls" fileName="magpack"  target="specissuepages" pageOnly="true"/>-->

                                <!--</h:commandLink>-->

                            </f:facet>
                        </p:dataTable>
                    </div>


                    <div class="limitedHeightDiv">

                        <c:forEach var="res" items="#{pubUserDet.listOfPageImageAdress}">
                            <div class="pageimage">
                                <p:graphicImage width="100%" height="100%"
                                                value="#{res.imagePath}"
                                        />
                                <h:outputText value="#{res.readPercent} %"/>
                            </div>
                        </c:forEach>

                    </div>

                    <p:remoteCommand name="uibrc" id="rcuiid2"/>
                    <p:blockUI id="blockui" block="chartsGridFirstRow" trigger="rcuiid2">
                        #{text['wait.message']}<br/>
                        <p:graphicImage value="/icons/loading.gif"/>
                    </p:blockUI>
                </div>
                <div id="RightColumn">

                    <h:panelGrid columns="1" id="chartsGridFirstRow">
                        <h:panelGrid columns="1" id="firstRowGrid">
                            <p:column id="AgeDistributionColumn">
                                <p:chart type="bar" id="barchart" model="#{specIssuePageCharts.readerThisMonths}"
                                         style="height:140px;width:100%;margin: auto;"/>
                                <!--<h:outputScript type="javascript">-->
                                <!--function barwidth(){-->
                                <!--this.cfg.seriesDefaults = {-->


                                <!--};-->
                                <!--}-->
                                <!--</h:outputScript>-->
                            </p:column>
                            <p:column id="GeoDistributionColumn">
                                <p:chart type="bar" model="#{specIssuePageCharts.downloadsReachReichweit}"
                                         style="width:100%;margin: auto;"/>
                            </p:column>
                            <p:column id="PageViewsPerWeekColumn">
                                <p:chart type="bar" model="#{specIssuePageCharts.revenuesMonthYear}"
                                         style="width:100%;margin: auto;"/>
                            </p:column>
                        </h:panelGrid>
                    </h:panelGrid>
                </div>
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>

</html>
